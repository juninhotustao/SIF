CREATE PROCEDURE ATUALIZA_ESTOQUE (
	@MOVIMENTO CHAR(1),
	@QTDE DECIMAL(10,2),
	@PRO_ID INT
) AS	
BEGIN
	/* SEM MOVIMENTO DE ESTOQUE */
	IF @MOVIMENTO = 'N' RETURN

	/* ENTRADA DE ESTOQUE */	
	IF @MOVIMENTO = 'E'
		UPDATE PRODUTOS SET PRO_ESTOQUE = (PRO_ESTOQUE + @QTDE) WHERE PRO_ID = @PRO_ID

	/* SÁIDA DE ESTOQUE */	
	IF @MOVIMENTO = 'S'	
		UPDATE PRODUTOS SET PRO_ESTOQUE = (PRO_ESTOQUE - @QTDE) WHERE PRO_ID = @PRO_ID	
END

--EXEC ATUALIZA_ESTOQUE 'E', 100, 1